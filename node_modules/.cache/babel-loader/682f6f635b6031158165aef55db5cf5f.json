<<<<<<< HEAD
{"remainingRequest":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/babel-loader/lib/index.js!/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/htdocs/github/ShoppingMall/src/components/detalis.vue?vue&type=script&lang=js","dependencies":[{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/src/components/detalis.vue","mtime":1575975263000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/cache-loader/dist/cjs.js","mtime":1534853416000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from 'mint-ui';\nexport default {\n  data: function data() {\n    return {\n      lid: this.$route.query.pid,\n      pics: [],\n      product: {\n        price: 0,\n        title: \"\"\n      },\n      specs: [],\n      isShow: false,\n      model: \"\"\n    };\n  },\n  created: function created() {\n    this.getDetalis();\n  },\n  methods: {\n    goPay: function goPay() {\n      this.$router.push(\"/pay?lid=\" + this.lid);\n    },\n    getDetalis: function getDetalis() {\n      var _this = this;\n\n      this.axios.get(\"http://127.0.0.1:3000/detalis?lid=\" + this.lid).then(function (res) {\n        _this.pics = res.data.pics;\n        _this.product = res.data.product;\n        _this.specs = res.data.specs; //循环specs中lid等于 data中lia的规格信息，赋值给model \n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = res.data.specs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n\n            if (item.lid == _this.lid) {\n              _this.model = item.spec;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      });\n    },\n    addCart: function addCart() {\n      var _this2 = this;\n\n      //1:参数 pid count uid price\n      var pid = this.lid,\n          price = this.product.price;\n      this.axios.get(\"http://127.0.0.1:3000/addcart?pid=\".concat(pid, \"&price=\").concat(price)).then(function (res) {\n        if (res.data.code == 1) {\n          Toast(\"添加成功\");\n\n          _this2.$store.commit(\"increment\");\n        }\n\n        if (res.data.code == 2) {\n          Toast(\"添加成功\");\n        }\n      });\n    },\n    buy: function buy() {\n      //立即购买\n      this.isShow = true;\n      console.log(this.pics);\n      console.log(this.product);\n      console.log(this.specs);\n    },\n    close: function close() {\n      //关闭\n      this.isShow = false;\n    },\n    change: function change(e) {\n      //规格列表修改\n      this.model = e.target.dataset.spec;\n    }\n  },\n  watch: {\n    $route: function $route(e) {\n      this.lid = e.query.pid; //获取当前地址栏中pid值，修改data中lid\n\n      this.getDetalis(); //在次更新详情页\n    }\n  }\n};",{"version":3,"sources":["detalis.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,WAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GADA;AAEA,YAAA,EAFA;AAGA,eAAA;AACA,eAAA,CADA;AAEA,eAAA;AAFA,OAHA;AAOA,aAAA,EAPA;AAQA,cAAA,KARA;AASA,aAAA;AATA,KAAA;AAWA,GAbA;AAcA,SAdA,qBAcA;AACA,SAAA,UAAA;AACA,GAhBA;AAiBA,WAAA;AACA,SADA,mBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,cAAA,KAAA,GAAA;AACA,KAHA;AAIA,cAJA,wBAIA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,uCAAA,KAAA,GAAA,EAAA,IAAA,CAAA,eAAA;AACA,cAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,cAAA,OAAA,GAAA,IAAA,IAAA,CAAA,OAAA;AACA,cAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA,CAHA,CAIA;;AAJA;AAAA;AAAA;;AAAA;AAKA,+BAAA,IAAA,IAAA,CAAA,KAAA,8HAAA;AAAA,gBAAA,IAAA;;AACA,gBAAA,KAAA,GAAA,IAAA,MAAA,GAAA,EAAA;AACA,oBAAA,KAAA,GAAA,KAAA,IAAA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,OAVA;AAWA,KAhBA;AAiBA,WAjBA,qBAiBA;AAAA;;AACA;AACA,UAAA,MAAA,KAAA,GAAA;AAAA,UACA,QAAA,KAAA,OAAA,CAAA,KADA;AAEA,WAAA,KAAA,CAAA,GAAA,6CAAA,GAAA,oBAAA,KAAA,GAAA,IAAA,CAAA,eAAA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA;;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,WAAA;AACA;;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA;AACA;AACA,OARA;AASA,KA9BA;AA+BA,OA/BA,iBA+BA;AAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,cAAA,GAAA,CAAA,KAAA,IAAA;AACA,cAAA,GAAA,CAAA,KAAA,OAAA;AACA,cAAA,GAAA,CAAA,KAAA,KAAA;AACA,KApCA;AAqCA,SArCA,mBAqCA;AAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KAvCA;AAwCA,UAxCA,kBAwCA,CAxCA,EAwCA;AAAA;AACA,WAAA,KAAA,GAAA,EAAA,MAAA,CAAA,OAAA,CAAA,IAAA;AACA;AA1CA,GAjBA;AA6DA,SAAA;AACA,UADA,kBACA,CADA,EACA;AACA,WAAA,GAAA,GAAA,EAAA,KAAA,CAAA,GAAA,CADA,CACA;;AACA,WAAA,UAAA,GAFA,CAEA;AACA;AAJA;AA7DA,CAAA","sourcesContent":["<template>\n    <div class=\"app-details\">\n    \t<!-- 顶部导航 -->\n        <mt-header fixed>\n            <router-link to=\"/\" slot=\"left\">\n                <mt-button icon=\"back\">返回</mt-button>\n            </router-link>\n            <mt-button icon=\"more\" slot=\"right\"></mt-button>\n        </mt-header>   \n\n        <!-- 详情页轮播图 -->\n       \n        <mt-swipe class=\"product-banner\" :auto=\"0\">\n            <mt-swipe-item v-for=\"(item,i) of pics\" :key=\"i\">\n                <img :src=\"'http://127.0.0.1:3000/' + item.md\">\n            </mt-swipe-item>\n        </mt-swipe>\n       \n        \n        <div class=\"mui-card\">\n\t\t\t\t<div class=\"mui-card-header\">\n                    <div>\n                        销售价:\n                        <span class=\"price\">¥{{product.price.toFixed(2)}}</span>\n                    </div>\n                </div>\n\t\t\t\t<div class=\"mui-card-content\">\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\n\t\t\t\t\t\t{{product.title}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mui-card-footer\">{{product.subtitle}}</div>\n\t\t</div>\n\n        <div class=\"addCart\">\n            <router-link to=\"#\" class=\"Cart-icon\">\n                <i class=\"mui-icon mui-icon-chat\"></i>\n                <span>联系客服</span>\n            </router-link>\n            <router-link  to=\"#\" class=\"Cart-icon\">\n                <i class=\"mui-icon mui-icon-home\"></i>\n                <span>进店</span>\n            </router-link>\n            <router-link  to=\"/cart\" class=\"Cart-icon cart_box\">\n                <i class=\"mui-icon-extra mui-icon-extra-cart\"></i>\n                <span>购物车</span>\n                <span class=\"cart_count\">{{$store.getters.optCartCount}}</span>\n            </router-link>\n            <span class=\"addCart-btn\" @click=\"addCart\">加入购物车</span>\n            <span class=\"buy\" @click=\"buy\">立即购买</span>\n        </div>\n\n\n\n    <!-- 立即购买浮层 -->\n    <div class=\"details_purchase\" v-if=\"isShow\">\n        <div class=\"close_box\">\n             <span class=\"top_close\" @click=\"close\">x</span>\n        </div>\n        <div class=\"product_box\">\n            <img :src=\" 'http://127.0.0.1:3000/' + pics[0].md \">\n            <div class=\"product_price\">\n               <span>¥{{product.price.toFixed(2)}}</span> \n               <p>已选:{{model}}</p>\n            </div>\n        </div>\n        <div class=\"product_model\">\n            <span>颜色</span>\n            <div class=\"items\">\n                <router-link class=\"item\" :data-spec=\"item.spec\" v-for=\"(item,i) of specs\" :key=\"i\" :class=\"`${item.lid==lid?'active':''}`\" :to=\"`/detalis?pid=${item.lid}`\" @click.native=\"change\">{{item.spec}}</router-link> \n            </div>\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"sub_btn\" @click=\"goPay\">确定</div>\n    </div>\n    </div>    \n</template>\n\n<script>\nimport {Toast} from 'mint-ui';\nexport default {\n    data(){\n        return{\n            lid:this.$route.query.pid,\n            pics:[],\n            product:{\n                price:0,\n                title:\"\"\n            },\n            specs:[],\n            isShow:false,\n            model:\"\"\n        }\n    },\n    created(){\n        this.getDetalis();\n    },\n    methods:{\n        goPay(){\n            this.$router.push(\"/pay?lid=\"+this.lid);\n        },\n        getDetalis(){\n            this.axios.get(\"http://127.0.0.1:3000/detalis?lid=\"+this.lid).then(res=>{\n                this.pics = res.data.pics;\n                this.product = res.data.product;\n                this.specs = res.data.specs;\n                //循环specs中lid等于 data中lia的规格信息，赋值给model \n                for(var item of res.data.specs){\n                    if(item.lid == this.lid){\n                        this.model =item.spec ;\n                    }\n                }\n            })\n        },\n        addCart(){\n            //1:参数 pid count uid price\n            var pid = this.lid,\n                price = this.product.price;\n                this.axios.get(`http://127.0.0.1:3000/addcart?pid=${pid}&price=${price}`).then(res=>{\n                    if(res.data.code==1){\n                        Toast(\"添加成功\");\n                        this.$store.commit(\"increment\");\n                    }\n                    if(res.data.code == 2){\n                        Toast(\"添加成功\");\n                    }\n                })\n        },\n        buy(){//立即购买\n            this.isShow = true;\n            console.log(this.pics);\n            console.log(this.product);\n            console.log(this.specs);\n        },\n        close(){//关闭\n            this.isShow = false;\n        },\n        change(e){ //规格列表修改\n            this.model = e.target.dataset.spec;\n        }\n    },\n    watch:{\n        $route(e){\n            this.lid = e.query.pid;  //获取当前地址栏中pid值，修改data中lid\n            this.getDetalis();  //在次更新详情页\n        }\n    }\n}\n</script>\n\n<style scoped>\n.product-banner{\n    height: 380px;\n}\n.product-banner img{\n    width: 100%;\n}\n.mui-card{\n    margin: 0;\n}\n.mui-card .price{\n    font-size:22px;\n    font-weight: bold;\n    color: red;\n}\n.mui-card .mui-card-content-inner{\n    padding: 10px;\n    font-size: 18px;\n}\n.mui-card .mui-card-footer{\n    padding: 5px;\n}\n.addCart{\n    width: 100%;\n    height: 51px;\n    background-color: #fff;\n    position: fixed;\n    bottom: 0;\n    z-index: 100;\n    display: flex;\n    justify-content: left;\n    padding: 0 0 0 5px;\n}\n.addCart .Cart-icon{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    color: rgb(160, 160, 160);\n    font-size: 14px;\n    text-align: center;\n    margin-right: 21px;\n}\n.addCart span.addCart-btn{\n    width: 90px;\n    height: 51px;\n    text-align: center;\n    line-height: 51px;\n    color: #fff;\n    font-size: 16px;\n    background-color: rgb(252, 99, 4);\n}\n.addCart span.buy{\n    width: 91px;\n    height: 51px;\n    color: #fff;\n    font-size: 16px;\n    text-align: center;\n    line-height: 51px;\n    background-color: #26a2ff;\n}\n.cart_box{\n    position: relative;\n}\n.cart_count{\n    position: absolute;\n    background-color: red;\n    color: #fff;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    text-align: center;\n    line-height: 20px;\n    left: 20px;\n    top: 2px;\n}\n\n/* 立即购买 */\n.details_purchase{\n    width: 100%;\n    background-color: #fff;\n    border-top-left-radius: 16px;\n    border-top-right-radius: 16px;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    position: fixed;\n    bottom: 0;\n    z-index: 999;\n    box-shadow: 0px -10px 30px #dadada;\n}\n.details_purchase .close_box{\n    width: 100%;\n    text-align: right;\n    margin-bottom: 2px;\n}\n.details_purchase .top_close{\n    display: inline-block;\n    text-align: center;\n    width: 20px;\n    height: 20px;\n    line-height: 18px;\n    background-color: #26a2ff;\n    border-radius: 10px;\n    color: rgb(245, 245, 245);\n}\n.details_purchase .product_box{\n    width: 100%;\n    display: flex;\n    justify-content: left;\n}\n.details_purchase .product_box img{\n    width: 120px;\n    margin-right: 16px;\n}\n.details_purchase .product_box .product_price{\n    display: flex;\n    justify-content:flex-end;\n    flex-direction: column;\n    align-items: flex-start; \n}\n.details_purchase .product_box span{\n    font-size: 20px;\n    color: red;\n}\n.details_purchase .product_model{\n    border-top: 1px solid rgb(244, 244, 244);\n    display: flex;\n    flex-direction: column;\n    margin-top: 10px;\n    padding-top:10px;\n}\n.details_purchase .product_model span{\n    color: balck;\n    font-size: 16px;\n    margin-bottom: 10px;\n}\n.details_purchase .product_model .items{\n    display: flex;\n    justify-content:left;\n    flex-wrap: wrap;\n}\n.details_purchase .product_model .item{\n    background-color: #f2f2f2;\n    padding: 2px 10px;\n    border-radius: 50px;\n    color: #000;\n    margin: 5px 0;\n}\n.details_purchase .product_model .active{\n    background-color: red;\n    color: #fff;\n}\n.details_purchase .line{\n    width: 100%;\n    height: 1px;\n    background-color: rgb(244, 244, 244);\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n.details_purchase .sub_btn{\n    width: 100%;\n    height: 40px;\n    background-color: #26a2ff;\n    border-radius: 20px;\n    color: #fff;\n    text-align: center;\n    line-height: 40px;\n}\n</style>\n\n\n"],"sourceRoot":"src/components"}]}
=======
{"remainingRequest":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/babel-loader/lib/index.js!/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/htdocs/github/ShoppingMall/src/components/detalis.vue?vue&type=script&lang=js","dependencies":[{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/src/components/detalis.vue","mtime":1575986305000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/cache-loader/dist/cjs.js","mtime":1575550168000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/babel-loader/lib/index.js","mtime":1575550168000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js","mtime":1575550171000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from 'mint-ui';\nexport default {\n  data: function data() {\n    return {\n      lid: this.$route.query.pid,\n      pics: [],\n      product: {\n        price: 0,\n        title: \"\"\n      },\n      specs: [],\n      isShow: false,\n      model: \"\"\n    };\n  },\n  created: function created() {\n    this.getDetalis();\n  },\n  methods: {\n    goPay: function goPay() {\n      this.$router.push(\"/pay?lid=\" + this.lid);\n    },\n    getDetalis: function getDetalis() {\n      var _this = this;\n\n      this.axios.get(\"http://127.0.0.1:3000/detalis?lid=\" + this.lid).then(function (res) {\n        _this.pics = res.data.pics;\n        _this.product = res.data.product;\n        _this.specs = res.data.specs; //循环specs中lid等于 data中lia的规格信息，赋值给model \n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = res.data.specs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n\n            if (item.lid == _this.lid) {\n              _this.model = item.spec;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      });\n    },\n    addCart: function addCart() {\n      var _this2 = this;\n\n      //1:参数 pid count uid price\n      var pid = this.lid,\n          price = this.product.price;\n      this.axios.get(\"http://127.0.0.1:3000/addcart?pid=\".concat(pid, \"&price=\").concat(price)).then(function (res) {\n        if (res.data.code == 1) {\n          Toast(\"添加成功\");\n\n          _this2.$store.commit(\"increment\");\n        }\n\n        if (res.data.code == 2) {\n          Toast(\"添加成功\");\n        }\n      });\n    },\n    buy: function buy() {\n      //立即购买\n      this.isShow = true;\n      console.log(this.pics);\n      console.log(this.product);\n      console.log(this.specs);\n    },\n    close: function close() {\n      //关闭\n      this.isShow = false;\n    },\n    change: function change(e) {\n      //规格列表修改\n      this.model = e.target.dataset.spec;\n    }\n  },\n  watch: {\n    $route: function $route(e) {\n      this.lid = e.query.pid; //获取当前地址栏中pid值，修改data中lid\n\n      this.getDetalis(); //在次更新详情页\n    }\n  }\n};",{"version":3,"sources":["detalis.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,WAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GADA;AAEA,YAAA,EAFA;AAGA,eAAA;AACA,eAAA,CADA;AAEA,eAAA;AAFA,OAHA;AAOA,aAAA,EAPA;AAQA,cAAA,KARA;AASA,aAAA;AATA,KAAA;AAWA,GAbA;AAcA,SAdA,qBAcA;AACA,SAAA,UAAA;AACA,GAhBA;AAiBA,WAAA;AACA,SADA,mBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,cAAA,KAAA,GAAA;AACA,KAHA;AAIA,cAJA,wBAIA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,uCAAA,KAAA,GAAA,EAAA,IAAA,CAAA,eAAA;AACA,cAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,cAAA,OAAA,GAAA,IAAA,IAAA,CAAA,OAAA;AACA,cAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA,CAHA,CAIA;;AAJA;AAAA;AAAA;;AAAA;AAKA,+BAAA,IAAA,IAAA,CAAA,KAAA,8HAAA;AAAA,gBAAA,IAAA;;AACA,gBAAA,KAAA,GAAA,IAAA,MAAA,GAAA,EAAA;AACA,oBAAA,KAAA,GAAA,KAAA,IAAA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,OAVA;AAWA,KAhBA;AAiBA,WAjBA,qBAiBA;AAAA;;AACA;AACA,UAAA,MAAA,KAAA,GAAA;AAAA,UACA,QAAA,KAAA,OAAA,CAAA,KADA;AAEA,WAAA,KAAA,CAAA,GAAA,6CAAA,GAAA,oBAAA,KAAA,GAAA,IAAA,CAAA,eAAA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA;;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,WAAA;AACA;;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA;AACA;AACA,OARA;AASA,KA9BA;AA+BA,OA/BA,iBA+BA;AAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,cAAA,GAAA,CAAA,KAAA,IAAA;AACA,cAAA,GAAA,CAAA,KAAA,OAAA;AACA,cAAA,GAAA,CAAA,KAAA,KAAA;AACA,KApCA;AAqCA,SArCA,mBAqCA;AAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KAvCA;AAwCA,UAxCA,kBAwCA,CAxCA,EAwCA;AAAA;AACA,WAAA,KAAA,GAAA,EAAA,MAAA,CAAA,OAAA,CAAA,IAAA;AACA;AA1CA,GAjBA;AA6DA,SAAA;AACA,UADA,kBACA,CADA,EACA;AACA,WAAA,GAAA,GAAA,EAAA,KAAA,CAAA,GAAA,CADA,CACA;;AACA,WAAA,UAAA,GAFA,CAEA;AACA;AAJA;AA7DA,CAAA","sourcesContent":["<template>\n    <div class=\"app-details\">\n    \t<!-- 顶部导航 -->\n        <mt-header fixed>\n            <router-link to=\"/\" slot=\"left\">\n                <mt-button icon=\"back\">返回</mt-button>\n            </router-link>\n            <mt-button icon=\"more\" slot=\"right\"></mt-button>\n        </mt-header>   \n\n        <!-- 详情页轮播图 -->\n       \n        <mt-swipe class=\"product-banner\" :auto=\"0\">\n            <mt-swipe-item v-for=\"(item,i) of pics\" :key=\"i\">\n                <img :src=\"'http://127.0.0.1:3000/' + item.md\">\n            </mt-swipe-item>\n        </mt-swipe>\n       \n        \n        <div class=\"mui-card\">\n\t\t\t\t<div class=\"mui-card-header\">\n                    <div>\n                        销售价:\n                        <span class=\"price\">¥{{product.price.toFixed(2)}}</span>\n                    </div>\n                </div>\n\t\t\t\t<div class=\"mui-card-content\">\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\n\t\t\t\t\t\t{{product.title}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mui-card-footer\">{{product.subtitle}}</div>\n\t\t</div>\n\n        <div class=\"addCart\">\n            <router-link to=\"#\" class=\"Cart-icon\">\n                <i class=\"mui-icon mui-icon-chat\"></i>\n                <span>联系客服</span>\n            </router-link>\n            <router-link  to=\"#\" class=\"Cart-icon\">\n                <i class=\"mui-icon mui-icon-home\"></i>\n                <span>进店</span>\n            </router-link>\n            <router-link  to=\"/cart\" class=\"Cart-icon cart_box\">\n                <i class=\"mui-icon-extra mui-icon-extra-cart\"></i>\n                <span>购物车</span>\n                <span class=\"cart_count\">{{$store.getters.optCartCount}}</span>\n            </router-link>\n            <span class=\"addCart-btn\" @click=\"addCart\">加入购物车</span>\n            <span class=\"buy\" @click=\"buy\">立即购买</span>\n        </div>\n\n\n\n    <!-- 立即购买浮层 -->\n    <div class=\"details_purchase\" v-if=\"isShow\">\n        <div class=\"close_box\">\n             <span class=\"top_close\" @click=\"close\">x</span>\n        </div>\n        <div class=\"product_box\">\n            <img :src=\" 'http://127.0.0.1:3000/' + pics[0].md \">\n            <div class=\"product_price\">\n               <span>¥{{product.price.toFixed(2)}}</span> \n               <p>已选:{{model}}</p>\n            </div>\n        </div>\n        <div class=\"product_model\">\n            <span>颜色</span>\n            <div class=\"items\">\n                <router-link class=\"item\" :data-spec=\"item.spec\" v-for=\"(item,i) of specs\" :key=\"i\" :class=\"`${item.lid==lid?'active':''}`\" :to=\"`/detalis?pid=${item.lid}`\" @click.native=\"change\">{{item.spec}}</router-link> \n            </div>\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"sub_btn\" @click=\"goPay\">确定</div>\n    </div>\n    </div>    \n</template>\n\n<script>\nimport {Toast} from 'mint-ui';\nexport default {\n    data(){\n        return{\n            lid:this.$route.query.pid,\n            pics:[],\n            product:{\n                price:0,\n                title:\"\"\n            },\n            specs:[],\n            isShow:false,\n            model:\"\"\n        }\n    },\n    created(){\n        this.getDetalis();\n    },\n    methods:{\n        goPay(){\n            this.$router.push(\"/pay?lid=\"+this.lid);\n        },\n        getDetalis(){\n            this.axios.get(\"http://127.0.0.1:3000/detalis?lid=\"+this.lid).then(res=>{\n                this.pics = res.data.pics;\n                this.product = res.data.product;\n                this.specs = res.data.specs;\n                //循环specs中lid等于 data中lia的规格信息，赋值给model \n                for(var item of res.data.specs){\n                    if(item.lid == this.lid){\n                        this.model =item.spec ;\n                    }\n                }\n            })\n        },\n        addCart(){\n            //1:参数 pid count uid price\n            var pid = this.lid,\n                price = this.product.price;\n                this.axios.get(`http://127.0.0.1:3000/addcart?pid=${pid}&price=${price}`).then(res=>{\n                    if(res.data.code==1){\n                        Toast(\"添加成功\");\n                        this.$store.commit(\"increment\");\n                    }\n                    if(res.data.code == 2){\n                        Toast(\"添加成功\");\n                    }\n                })\n        },\n        buy(){//立即购买\n            this.isShow = true;\n            console.log(this.pics);\n            console.log(this.product);\n            console.log(this.specs);\n        },\n        close(){//关闭\n            this.isShow = false;\n        },\n        change(e){ //规格列表修改\n            this.model = e.target.dataset.spec;\n        }\n    },\n    watch:{\n        $route(e){\n            this.lid = e.query.pid;  //获取当前地址栏中pid值，修改data中lid\n            this.getDetalis();  //在次更新详情页\n        }\n    }\n}\n</script>\n\n<style scoped>\n.product-banner{\n    height: 380px;\n}\n.product-banner img{\n    width: 100%;\n}\n.mui-card{\n    margin: 0;\n}\n.mui-card .price{\n    font-size:22px;\n    font-weight: bold;\n    color: red;\n}\n.mui-card .mui-card-content-inner{\n    padding: 10px;\n    font-size: 18px;\n}\n.mui-card .mui-card-footer{\n    padding: 5px;\n}\n.addCart{\n    width: 100%;\n    height: 51px;\n    background-color: #fff;\n    position: fixed;\n    bottom: 0;\n    z-index: 100;\n    display: flex;\n    justify-content: left;\n    padding: 0 0 0 5px;\n}\n.addCart .Cart-icon{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    color: rgb(160, 160, 160);\n    font-size: 14px;\n    text-align: center;\n    margin-right: 21px;\n}\n.addCart span.addCart-btn{\n    width: 90px;\n    height: 51px;\n    text-align: center;\n    line-height: 51px;\n    color: #fff;\n    font-size: 16px;\n    background-color: rgb(252, 99, 4);\n}\n.addCart span.buy{\n    width: 91px;\n    height: 51px;\n    color: #fff;\n    font-size: 16px;\n    text-align: center;\n    line-height: 51px;\n    background-color: #26a2ff;\n}\n.cart_box{\n    position: relative;\n}\n.cart_count{\n    position: absolute;\n    background-color: red;\n    color: #fff;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    text-align: center;\n    line-height: 20px;\n    left: 20px;\n    top: 2px;\n}\n\n/* 立即购买 */\n.details_purchase{\n    width: 100%;\n    background-color: #fff;\n    border-top-left-radius: 16px;\n    border-top-right-radius: 16px;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    position: fixed;\n    bottom: 0;\n    z-index: 999;\n    box-shadow: 0px -10px 30px #dadada;\n}\n.details_purchase .close_box{\n    width: 100%;\n    text-align: right;\n    margin-bottom: 2px;\n}\n.details_purchase .top_close{\n    display: inline-block;\n    text-align: center;\n    width: 20px;\n    height: 20px;\n    line-height: 18px;\n    background-color: #26a2ff;\n    border-radius: 10px;\n    color: rgb(245, 245, 245);\n}\n.details_purchase .product_box{\n    width: 100%;\n    display: flex;\n    justify-content: left;\n}\n.details_purchase .product_box img{\n    width: 120px;\n    margin-right: 16px;\n}\n.details_purchase .product_box .product_price{\n    display: flex;\n    justify-content:flex-end;\n    flex-direction: column;\n    align-items: flex-start; \n}\n.details_purchase .product_box span{\n    font-size: 20px;\n    color: red;\n}\n.details_purchase .product_model{\n    border-top: 1px solid rgb(244, 244, 244);\n    display: flex;\n    flex-direction: column;\n    margin-top: 10px;\n    padding-top:10px;\n}\n.details_purchase .product_model span{\n    color: balck;\n    font-size: 16px;\n    margin-bottom: 10px;\n}\n.details_purchase .product_model .items{\n    display: flex;\n    justify-content:left;\n    flex-wrap: wrap;\n}\n.details_purchase .product_model .item{\n    background-color: #f2f2f2;\n    padding: 2px 10px;\n    border-radius: 50px;\n    color: #000;\n    margin: 5px 0;\n}\n.details_purchase .product_model .active{\n    background-color: red;\n    color: #fff;\n}\n.details_purchase .line{\n    width: 100%;\n    height: 1px;\n    background-color: rgb(244, 244, 244);\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n.details_purchase .sub_btn{\n    width: 100%;\n    height: 40px;\n    background-color: #26a2ff;\n    border-radius: 20px;\n    color: #fff;\n    text-align: center;\n    line-height: 40px;\n}\n</style>\n\n\n"],"sourceRoot":"src/components"}]}
>>>>>>> e7e26ba7ff3e52ee37bd351d7257e5e907fcad0f
