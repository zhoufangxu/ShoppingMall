{"remainingRequest":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/htdocs/github/ShoppingMall/src/components/cart/cart.vue?vue&type=style&index=0&id=03aa1d4f&scoped=true&lang=css","dependencies":[{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/src/components/cart/cart.vue","mtime":1574951678000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1521907988000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/cache-loader/dist/cjs.js","mtime":1534853416000},{"path":"/Applications/MAMP/htdocs/github/ShoppingMall/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.adress-box{\n    width: 100%;\n    padding: 0 5px;\n    height: 40px;\n    border-bottom: 1px solid rgb(213, 213, 213);\n    background-color: #fff;\n    line-height: 40px;\n}\n.adress-box .adress-item{\n    font-size: 14px;\n    color: rgb(169, 169, 169);\n}\n.cart-box{\n    width: 100%;\n    background-color: #fff;\n    padding: 20px;\n    border-bottom: 1px solid rgb(181, 181, 181);\n}\n.cart-box .cart-item{\n    width: 100%;\n    display: flex;\n    justify-content: left;\n}\n.cart-box .cart-item .radio{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    border:1px solid rgb(164, 164, 164);\n    margin: 0 5px;\n    position: relative;\n    top: 36px;\n    margin: 0 10px;\n}\n.cart-box .cart-item img{\n    width: 100px;\n    margin-right: 10px;\n    display: block;\n}\n.cart-box .cart-item .cart-describe p{\n    font-size: 14px;\n    color: #000;\n    margin-bottom: 5px;\n}\n.cart-box .cart-item .cart-describe .describe{\n    display: inline-block;\n    width: 120px;\n    height: 20px;\n    background-color: rgb(238, 238, 238);\n    font-size: 12px;\n    color: rgb(167, 167, 167);\n    padding-left: 5px;\n}\n.cart-box .cart-item .price-box{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 5px;\n     margin-top: 20px;\n}\n.cart-box .cart-item .price-box .price{\n    color: red;\n    font-weight: bold;\n    margin-right: 40px;\n}\n.cart-box .cart-item .price-box .btn-box{\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n}\n.cart-box .cart-item .price-box .btn-box .size{\n    width: 24px;\n    height: 24px;\n    border: 1px solid rgb(205, 205, 205);\n    text-align: center;\n    line-height: 20px;\n    border-radius: 5px;\n}\n.cart-del{\n    display: flex;\n    justify-content: space-between;\n    font-size: 14px;\n    color: rgb(196, 196, 196);\n    margin-top: 5px;\n}\n\n.tabbar{\n    width: 100%;\n    height: 50px;\n    background-color: #fff;\n    position: fixed;\n    bottom: 0;\n    z-index: 100;\n    display: flex;\n    justify-content: space-between;\n    padding-left: 5px;\n    align-items: center;\n}\n.tabbar .tabbar-all{\n    display: flex;\n    justify-content: center;\n    text-align: center;\n    margin-left: 10px;\n    align-items: center;\n}\n.tabbar .tabbar-all input{\n    width: 15px;\n    height: 15px;\n    border: 1px solid rgb(177, 177, 177);\n    border-radius: 50%;\n    margin-left: 3px;\n}\n.tabbar .tabbar-all span{\n    font-size: 16px;\n    color: rgb(177, 177, 177);\n    margin-left: 5px;\n}\n.tabbar .tabbar-all-price{\n    font-size: 16px;\n    display: flex;\n    align-items: center;\n}\n.tabbar .tabbar-all-price span{\n    font-size: 20px;\n    color: red;\n    font-weight: bold;\n    margin-left: 5px;\n}\n.tabbar .Settlement{\n    width: 120px;\n    height: 50px;\n    background-color: #26a2ff;\n    color: #fff;\n    text-align: center;\n    line-height: 50px;\n}\n.tabbar .Settlement span{\n    font-size: 12px;\n}\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/components/cart","sourcesContent":["<template>\n    <div class=\"app-cart\">\n        <!-- 头部导航 -->\n        <mt-header fixed title=\"购物车\">\n            <div slot=\"left\" @click=\"goBack\">\n                <mt-button icon=\"back\">返回</mt-button>\n            </div>\n            <mt-button icon=\"more\" slot=\"right\"></mt-button>\n        </mt-header>\n        \n        <!-- adress -->\n        <div class=\"adress-box\">\n            <span class=\"mui-icon mui-icon-location\"></span>\n            <span class=\"adress-item\">朝阳区酒仙桥</span>\n        </div>\n        \n        <!-- 购物车列表 -->\n        <div class=\"cart-box\" v-for=\"(item,i) of cartList\" :key=\"i\">\n            <div class=\"cart-item\">\n                <input type=\"checkbox\" class=\"radio\" :checked=\"item.cb\" @click=\"changeItem\" :data-i=\"i\">\n                <img src=\"http://127.0.0.1:3000/img/erji.jpg\">\n                <div class=\"cart-describe\">\n                    <p>{{item.lname}}</p>\n                    <span class=\"describe\">白色,耳机</span>\n                    <div class=\"price-box\">\n                        <span class=\"price\">{{parseInt(item.price).toFixed(2)}}</span>\n                        <div class=\"btn-box\">\n                            <span class=\"minus size\" @click=\"reduce\" :data-pid=\"item.pid\" :data-count=\"item.count\" :data-i=\"i\">-</span>\n                            <input class=\"size cart-count\" :value=\"item.count\">\n                            <span class=\"add size\" @click=\"add\" :data-pid=\"item.pid\" :data-i=\"i\">+</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"cart-del\">\n                    <span>移入关注</span>\n                    <span @click=\"removeItem\" :data-id=\"item.id\" :data-i=\"i\">删除</span>\n            </div>\n        </div>\n        <div>\n            <button @click=\"delItem\">删除选中商品</button>\n        </div>\n        \n        <!-- <div>{{cartCount}}</div> -->\n        <!-- 底部全选 结算 -->\n        <div class=\"tabbar\">\n            <div class=\"tabbar-all\">\n                <input type=\"checkbox\" @click=\"selectAll\" :checked=\"checkedAll\">\n                <span>全选</span>\n            </div>\n            <div class=\"tabbar-all-price\">\n                总计:\n                <span>¥{{notes.toFixed(2)}}</span>\n            </div>\n            <div class=\"Settlement\">\n                去结算\n                <span>({{number}})</span>\n            </div>\n        </div>\n    </div>    \n</template>\n\n<script>\nimport {Toast,MessageBox} from 'mint-ui';\nexport default {\n    data(){\n        return{\n            checkedAll:false,\n            listCount:0\n        }\n    },\n    methods:{\n        goBack(){ //返回上一步\n            history.go(-1);\n        },\n        delItem(){ //删除多个商品\n           var ids = \"\";\n           for(var item of this.cartList){\n               if(item.cb){\n                   ids += item.id + \",\";\n               }\n           }\n           ids = ids.substring(0,ids.length-1);\n           if(ids.length != 0){\n               MessageBox.confirm('确定删除?').then(action => {\n               this.axios.get(`http://127.0.0.1:3000/removeMItem?ids=${ids}`).then(res=>{\n                if(res.data.code == 1){\n                    Toast(\"删除成功\");\n                    this.loadMore();\n                    }\n                })\n               });\n           }\n        },\n        removeItem(e){ //删除一个产品\n           var id = e.target.dataset.id; //获得商品在购物车中的id\n           var i = e.target.dataset.i;   //获得当前商品在数组中的下标\n           MessageBox.confirm('确定删除?').then(action => {\n                this.axios.get(`http://127.0.0.1:3000/delCartItem?id=${id}`).then(res=>{\n                if(res.data.code == 1){\n                    Toast(\"删除成功\");\n                    this.cartList.splice(i,1); //删除指定下标元素\n                    this.loadMore();\n                }\n                })\n            });\n             \n           \n        },\n        add(e){  //购物车添加产品数量\n            var count = 1;\n            var pid = e.target.dataset.pid;\n            var i = e.target.dataset.i;\n            this.axios.get(`http://127.0.0.1:3000/upDatecart?pid=${pid}&count=${count}`).then(res=>{\n                this.$store.commit(\"upCartListCountAdd\",i);\n            })\n        },\n        reduce(e){  //购物车删除产品数量\n            var itemCount = e.target.dataset.count;\n            var count = -1;\n            var pid = e.target.dataset.pid;\n            var i = e.target.dataset.i;\n            if(itemCount > 1){\n                this.axios.get(`http://127.0.0.1:3000/upDatecart?pid=${pid}&count=${count}`).then(res=>{\n                   this.$store.commit(\"upCartListCountReduce\",i);\n                })\n            }else{\n                Toast(\"最少购买1件哦\")\n            }\n           \n        },\n        selectAll(e){\n            var cb = e.target.checked;\n            this.checkedAll = cb;\n            for(var item of this.cartList){\n                item.cb = cb;\n            } \n        },\n        changeItem(e){\n            var cb = e.target.checked;\n            var i = e.target.dataset.i;\n            this.cartList[i].cb = cb;\n            //复选框点击时获得cb为true的个数\n            var count = 0;\n            for(var item of this.cartList){\n                if(item.cb){\n                    count++;\n                }\n            }\n            if(count == this.cartList.length){\n                this.checkedAll = true;\n            }else{\n                this.checkedAll = false;\n            }\n        },\n        loadMore(){\n            this.axios.get(\"http://127.0.0.1:3000/cartlist\").then(res=>{\n                if(res.data.code == -1){\n                    Toast(\"您还没有登录,请登陆\");\n                    return;\n                }\n                var rows = res.data.data;\n                for(var item of rows){\n                    item.cb = false;\n                }\n                // this.cart_list = rows;\n                this.$store.commit(\"updataCartList\",rows);\n                this.$store.commit(\"updateCount\",rows.length);\n            })\n        }\n    },\n    computed:{\n        cartList:function(){\n            return this.$store.getters.getCartList;\n        },\n        notes:function(){\n            //创建变量保存总计\n            var sum = 0;\n            //循环item中cb为true的产品的价格，累加到sum中\n            for(var item of this.cartList){\n                if(item.cb){\n                    sum += item.price*item.count;\n                }\n            }\n            //返回总计\n            return sum;\n        },\n        number:function(){\n            //创建变量保存要结算商品的个数\n            var count = 0;\n            //遍历数组中cb为true的 累加\n            for(var item of this.cartList){\n                if(item.cb){\n                    count += item.count;\n                }\n            }\n            return count;\n        }\n    },\n    created(){\n       this.loadMore();\n    }\n}\n</script>\n\n<style scoped>\n.adress-box{\n    width: 100%;\n    padding: 0 5px;\n    height: 40px;\n    border-bottom: 1px solid rgb(213, 213, 213);\n    background-color: #fff;\n    line-height: 40px;\n}\n.adress-box .adress-item{\n    font-size: 14px;\n    color: rgb(169, 169, 169);\n}\n.cart-box{\n    width: 100%;\n    background-color: #fff;\n    padding: 20px;\n    border-bottom: 1px solid rgb(181, 181, 181);\n}\n.cart-box .cart-item{\n    width: 100%;\n    display: flex;\n    justify-content: left;\n}\n.cart-box .cart-item .radio{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    border:1px solid rgb(164, 164, 164);\n    margin: 0 5px;\n    position: relative;\n    top: 36px;\n    margin: 0 10px;\n}\n.cart-box .cart-item img{\n    width: 100px;\n    margin-right: 10px;\n    display: block;\n}\n.cart-box .cart-item .cart-describe p{\n    font-size: 14px;\n    color: #000;\n    margin-bottom: 5px;\n}\n.cart-box .cart-item .cart-describe .describe{\n    display: inline-block;\n    width: 120px;\n    height: 20px;\n    background-color: rgb(238, 238, 238);\n    font-size: 12px;\n    color: rgb(167, 167, 167);\n    padding-left: 5px;\n}\n.cart-box .cart-item .price-box{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 5px;\n     margin-top: 20px;\n}\n.cart-box .cart-item .price-box .price{\n    color: red;\n    font-weight: bold;\n    margin-right: 40px;\n}\n.cart-box .cart-item .price-box .btn-box{\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n}\n.cart-box .cart-item .price-box .btn-box .size{\n    width: 24px;\n    height: 24px;\n    border: 1px solid rgb(205, 205, 205);\n    text-align: center;\n    line-height: 20px;\n    border-radius: 5px;\n}\n.cart-del{\n    display: flex;\n    justify-content: space-between;\n    font-size: 14px;\n    color: rgb(196, 196, 196);\n    margin-top: 5px;\n}\n\n.tabbar{\n    width: 100%;\n    height: 50px;\n    background-color: #fff;\n    position: fixed;\n    bottom: 0;\n    z-index: 100;\n    display: flex;\n    justify-content: space-between;\n    padding-left: 5px;\n    align-items: center;\n}\n.tabbar .tabbar-all{\n    display: flex;\n    justify-content: center;\n    text-align: center;\n    margin-left: 10px;\n    align-items: center;\n}\n.tabbar .tabbar-all input{\n    width: 15px;\n    height: 15px;\n    border: 1px solid rgb(177, 177, 177);\n    border-radius: 50%;\n    margin-left: 3px;\n}\n.tabbar .tabbar-all span{\n    font-size: 16px;\n    color: rgb(177, 177, 177);\n    margin-left: 5px;\n}\n.tabbar .tabbar-all-price{\n    font-size: 16px;\n    display: flex;\n    align-items: center;\n}\n.tabbar .tabbar-all-price span{\n    font-size: 20px;\n    color: red;\n    font-weight: bold;\n    margin-left: 5px;\n}\n.tabbar .Settlement{\n    width: 120px;\n    height: 50px;\n    background-color: #26a2ff;\n    color: #fff;\n    text-align: center;\n    line-height: 50px;\n}\n.tabbar .Settlement span{\n    font-size: 12px;\n}\n</style>\n\n\n"]}]}